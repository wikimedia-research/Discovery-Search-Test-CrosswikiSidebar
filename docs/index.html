<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<meta name="date" content="2017-03-07" />

<title>A Test Of Cross-wiki Search</title>

<script src="index_files/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="index_files/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="index_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="index_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="index_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="index_files/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="index_files/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="index_files/tocify-1.9.1/jquery.tocify.js"></script>
<script src="index_files/navigation-1.1/tabsets.js"></script>
<script src="index_files/navigation-1.1/codefolding.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #303030; color: #cccccc; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; }
td.sourceCode { padding-left: 5px; }
pre, code { color: #cccccc; background-color: #303030; }
code > span.kw { color: #f0dfaf; } /* Keyword */
code > span.dt { color: #dfdfbf; } /* DataType */
code > span.dv { color: #dcdccc; } /* DecVal */
code > span.bn { color: #dca3a3; } /* BaseN */
code > span.fl { color: #c0bed1; } /* Float */
code > span.ch { color: #dca3a3; } /* Char */
code > span.st { color: #cc9393; } /* String */
code > span.co { color: #7f9f7f; } /* Comment */
code > span.ot { color: #efef8f; } /* Other */
code > span.al { color: #ffcfaf; } /* Alert */
code > span.fu { color: #efef8f; } /* Function */
code > span.er { color: #c3bf9f; } /* Error */
code > span.wa { color: #7f9f7f; font-weight: bold; } /* Warning */
code > span.cn { color: #dca3a3; font-weight: bold; } /* Constant */
code > span.sc { color: #dca3a3; } /* SpecialChar */
code > span.vs { color: #cc9393; } /* VerbatimString */
code > span.ss { color: #cc9393; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { } /* Variable */
code > span.cf { color: #f0dfaf; } /* ControlFlow */
code > span.op { color: #f0efd0; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #ffcfaf; font-weight: bold; } /* Preprocessor */
code > span.at { } /* Attribute */
code > span.do { color: #7f9f7f; } /* Documentation */
code > span.an { color: #7f9f7f; font-weight: bold; } /* Annotation */
code > span.cv { color: #7f9f7f; font-weight: bold; } /* CommentVar */
code > span.in { color: #7f9f7f; font-weight: bold; } /* Information */
div.sourceCode {
  overflow-x: visible;
}
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>

<style type="text/css">
  p.abstract{
    text-align: center;
    font-weight: bold;
  }
  div.abstract{
    margin: auto;
    width: 90%;
  }
</style>

<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>



<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">A Test Of Cross-wiki Search</h1>
<h3 class="subtitle"><em>Helping Users Discover Content On Wikipedia’s Sister Projects</em></h3>
<h4 class="author"><em>Erik Bernhardson</em></h4>
<address class="author_afil">
Senior Software Engineer, Wikimedia Foundation<br><h4 class="author"><em>Jan Drewniak</em></h4>
<address class="author_afil">
User Experience Engineer, Wikimedia Foundation<br><h4 class="author"><em>Dan Garry</em></h4>
<address class="author_afil">
Product Manager (Search Backend), Wikimedia Foundation<br><h4 class="author"><em>Mikhail Popov</em></h4>
<address class="author_afil">
Data Analyst, Wikimedia Foundation<br><h4 class="author"><em>Deb Tankersley</em></h4>
<address class="author_afil">
Product Manager (Analysis, Search Frontend), Wikimedia Foundation<br><h4 class="date"><em>07 March 2017</em></h4>
<div class="abstract">
<p class="abstract">Abstract</p>
Wikimedia Engineering’s Discovery’s Search team ran an A/B test from 9 Feb 2017 to 22 Feb 2017 to assess the effectiveness of performing cross-wiki searches and showing Catalan, Italian, Persian, and Polish Wikipedias’ users results from sister projects such as Wikisource and Wikiquote. We found that while the overall engagement with the search results was higher for the two test groups compared to the control group, there was no sufficient evidence to definitively say that the additional search results increased user engagement. We suspect that a critical UX design issue – links shown in black, rather than standard blue – and the particular languages this test was deployed on (resulting in a higher zero results rate than seen across other languages) had a negative effect on the results, and recommend performing a follow-up test.
</div>

</div>


<script type="text/javascript">
$(function() {
  /* Lets the user click on the images to view them in full resolution. */
  $("div.figure img").wrap(function() {
    var link = $('<a/>');
    link.attr('href', $(this).attr('src'));
    link.attr('title', $(this).attr('alt'));
    link.attr('target', '_blank');
    return link;
  });
  $("p.abstract").text("Executive Summary");
  $("div#wmf").wrap('<a href="https://wikimediafoundation.org/" />');
});
</script>
<p>
{ <a href="https://github.com/wikimedia-research/Discovery-Search-Test-CrosswikiSidebar/blob/master/docs/index.Rmd">RMarkdown Source</a> | <a href="https://github.com/wikimedia-research/Discovery-Search-Test-CrosswikiSidebar">Analysis Codebase</a> }
</p>
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>Within the <a href="https://wikimediafoundation.org/wiki/Home">Wikimedia Foundation</a>’s <a href="https://www.mediawiki.org/wiki/Wikimedia_Engineering">Engineering group</a>, the <a href="https://www.mediawiki.org/wiki/Wikimedia_Discovery">Discovery department</a>’s mission is to make the wealth of knowledge and content in the <a href="https://wikimediafoundation.org/wiki/Our_projects">Wikimedia projects</a> (such as <a href="https://www.wikipedia.org/">Wikipedia</a>) easily discover-able. The Search team is responsible for maintaining and enhancing the search features and APIs for MediaWiki, such as language detection (i.e. if a French Wikipedia visitor searches in German, then in addition to results from French Wikipedia, they would also get results from German Wikipedia).</p>
<p>Specifically, the <a href="https://www.mediawiki.org/wiki/Wikimedia_Discovery/Search">Search team</a>’s current goal is to add cross-wiki searching – that is, providing search results from other (also referred to as “sister”) Wikimedia projects (“<em>wikis</em>”) within the same language. For example, if a work (e.g. a book or poem) on French Wikisource contained that German phrase, that user would be shown results from French Wikisource in addition to any results from French and German Wikipedias.</p>
<div class="figure" style="text-align: center">
<img src="index_files/figure-html/example_figure-1.png" alt="**Figure 1**: Example of cross-wiki search results on Polish Wikipedia, with sister wikis randomly ordered in the sidebar. Multimedia results (including results from Wikimedia Commons) are shown first, regardless of the sidebar ordering."  />
<p class="caption">
<strong>Figure 1</strong>: Example of cross-wiki search results on Polish Wikipedia, with sister wikis randomly ordered in the sidebar. Multimedia results (including results from Wikimedia Commons) are shown first, regardless of the sidebar ordering.
</p>
</div>
<p>For the users who received the experimental user experience (UX), each additional wiki’s top result was shown as a box in a sidebar with a link to view more results (see Figure 10). There were two groups of users who received the experimental UX and one control group that did not:</p>
<dl>
<dt><span class="test-group-1">Control</span></dt>
<dd>This group received the baseline user experience, which only includes the search results from the wiki they are on. To make their experience comparable to the test groups with respect to latency, we performed the search across the additional indices, but did not show the results to the end user.
</dd>
<dt><span class="test-group-2">Test (Random)</span></dt>
<dd>This group received the experimental user experience, which includes search results from other wikis (if any were returned). The boxes holding the results (one box for each wiki) were ordered randomly.
</dd>
<dt><span class="test-group-3">Test (Recall)</span></dt>
<dd>This group received the experimental user experience, which includes search results from other wikis (if any were returned). The boxes holding the results (one box for each wiki) were ordered according to recall – the volume of search results returned for each respective wiki.
</dd>
</dl>
<p>The primary questions we wanted to answer are:</p>
<ul>
<li><p>Did users who saw the additional cross-wiki results engage with those results?</p></li>
<li><p>Was the overall engagement with search results better or worse compared to the controls?</p></li>
</ul>
<p>On 9 February 2017 we deployed an A/B test on the desktop version of Catalan, Italian, Persian, and Polish Wikipedias to assess the efficacy of this feature. The test concluded on 22 February 2017, after a total 6620 search sessions have been anonymously tracked.</p>
</div>
<div id="methods" class="section level1">
<h1>Methods</h1>
<p>This test’s event logging (EL) was implemented in JavaScript according to the <a href="https://meta.wikimedia.org/wiki/Schema:TestSearchSatisfaction2">TestSearchSatisfaction2</a> (TSS2) schema, which is the one used by the Search team for its metrics on desktop, data was stored in a MySQL database, and analyzed and reported using R <span class="citation">[<a href="#ref-R-base">1</a>]</span>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">import<span class="op">::</span><span class="kw">from</span>(dplyr, group_by, ungroup, <span class="dt">keep_where =</span> filter, mutate, arrange, select, transmute, left_join, summarize, bind_rows, case_when, if_else, rename)
<span class="kw">library</span>(ggplot2)</code></pre></div>
<div id="data" class="section level2">
<h2>Data</h2>
<p>The data was collected according to the <a href="https://meta.wikimedia.org/w/index.php?title=Schema:TestSearchSatisfaction2&amp;direction=next&amp;oldid=15922352">TSS2 schema, revision 16270835</a>. Figure 11 shows the flow of Wikipeda visitors on Desktop. Approximately 5.7% of the unique desktop devices that visit the 270 Wikipedias are accounted by Catalan, Italian, Persian, and Polish Wikipedias. In general, desktop users are randomly selected for anonymous tracking at a rate of 1 in 200, but for these wikis we changed the sampling rate to 1 in 200 for Catalan and Persian, and 1 in 50 for Italian and Polish. After a user was randomly selected into event logging, they had a 50% chance to be selected for the A/B test. Users who made it into the test were then randomly assigned to one of the three groups described above: <span class="test-group-1">Control</span>, <span class="test-group-2">Test (Random)</span>, and <span class="test-group-3">Test (Recall)</span>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">experiment_nodes &lt;-<span class="st"> </span><span class="kw">c</span>(
  <span class="st">&quot;Wikipedia visitors on Desktop&quot;</span>,
  <span class="st">&quot;Italian (2.85%)&quot;</span>, <span class="st">&quot;Persian (0.61%)&quot;</span>, <span class="st">&quot;Catalan (0.23%)&quot;</span>, <span class="st">&quot;Polish (2.06%)&quot;</span>, <span class="st">&quot;Other Languages (94.3%)&quot;</span>,
  <span class="st">&quot;Eligible for test&quot;</span>, <span class="st">&quot;Not in Event Logging&quot;</span>, <span class="st">&quot;In Event Logging&quot;</span>,
  <span class="st">&quot;50% enrolled into A/B Test&quot;</span>, <span class="st">&quot;Not in test, but in EL&quot;</span>,
  <span class="st">&quot;1/3 assigned to Test (Recall)&quot;</span>, <span class="st">&quot;1/3 assigned to Test (Random)&quot;</span>, <span class="st">&quot;1/3 assigned to Control&quot;</span>
)
experiment_edges &lt;-<span class="st"> </span><span class="kw">list</span>(
  <span class="st">&quot;Wikipedia visitors on Desktop&quot;</span> =<span class="st"> </span><span class="kw">list</span>(
    <span class="st">&quot;Italian (2.85%)&quot;</span> =<span class="st"> </span><span class="fl">0.028</span>,
    <span class="st">&quot;Persian (0.61%)&quot;</span> =<span class="st"> </span><span class="fl">0.006</span>,
    <span class="st">&quot;Catalan (0.23%)&quot;</span> =<span class="st"> </span><span class="fl">0.002</span>,
    <span class="st">&quot;Polish (2.06%)&quot;</span> =<span class="st"> </span><span class="fl">0.021</span>,
    <span class="st">&quot;Other Languages (94.3%)&quot;</span> =<span class="st"> </span><span class="fl">0.943</span>
  ),
  <span class="st">&quot;Other Languages (94.3%)&quot;</span> =<span class="st"> </span><span class="kw">list</span>(<span class="st">&quot;In Event Logging&quot;</span> =<span class="st"> </span><span class="dv">1</span><span class="op">/</span><span class="dv">200</span>, <span class="st">&quot;Not in Event Logging&quot;</span> =<span class="st"> </span><span class="dv">199</span><span class="op">/</span><span class="dv">200</span>),
  <span class="st">&quot;Italian (2.85%)&quot;</span> =<span class="st"> </span><span class="kw">list</span>(<span class="st">&quot;Eligible for test&quot;</span> =<span class="st"> </span><span class="dv">1</span><span class="op">/</span><span class="dv">50</span>, <span class="st">&quot;Not in Event Logging&quot;</span> =<span class="st"> </span><span class="dv">49</span><span class="op">/</span><span class="dv">50</span>),
  <span class="st">&quot;Polish (2.06%)&quot;</span> =<span class="st"> </span><span class="kw">list</span>(<span class="st">&quot;Eligible for test&quot;</span> =<span class="st"> </span><span class="dv">1</span><span class="op">/</span><span class="dv">50</span>, <span class="st">&quot;Not in Event Logging&quot;</span> =<span class="st"> </span><span class="dv">49</span><span class="op">/</span><span class="dv">50</span>),
  <span class="st">&quot;Persian (0.61%)&quot;</span> =<span class="st"> </span><span class="kw">list</span>(<span class="st">&quot;Eligible for test&quot;</span> =<span class="st"> </span><span class="dv">1</span><span class="op">/</span><span class="dv">10</span>, <span class="st">&quot;Not in Event Logging&quot;</span> =<span class="st"> </span><span class="dv">9</span><span class="op">/</span><span class="dv">10</span>),
  <span class="st">&quot;Catalan (0.23%)&quot;</span> =<span class="st"> </span><span class="kw">list</span>(<span class="st">&quot;Eligible for test&quot;</span> =<span class="st"> </span><span class="dv">1</span><span class="op">/</span><span class="dv">10</span>, <span class="st">&quot;Not in Event Logging&quot;</span> =<span class="st"> </span><span class="dv">9</span><span class="op">/</span><span class="dv">10</span>),
  <span class="st">&quot;Eligible for test&quot;</span> =<span class="st"> </span><span class="kw">list</span>(<span class="st">&quot;50% enrolled into A/B Test&quot;</span> =<span class="st"> </span><span class="dv">1</span><span class="op">/</span><span class="dv">2</span>, <span class="st">&quot;Not in test, but in EL&quot;</span> =<span class="st"> </span><span class="dv">1</span><span class="op">/</span><span class="dv">2</span>),
  <span class="st">&quot;50% enrolled into A/B Test&quot;</span> =<span class="st"> </span><span class="kw">list</span>(<span class="st">&quot;1/3 assigned to Control&quot;</span> =<span class="st"> </span><span class="dv">1</span><span class="op">/</span><span class="dv">3</span>, <span class="st">&quot;1/3 assigned to Test (Recall)&quot;</span> =<span class="st"> </span><span class="dv">1</span><span class="op">/</span><span class="dv">3</span>, <span class="st">&quot;1/3 assigned to Test (Random)&quot;</span> =<span class="st"> </span><span class="dv">1</span><span class="op">/</span><span class="dv">3</span>)
)
ds &lt;-<span class="st"> </span>riverplot<span class="op">::</span><span class="kw">default.style</span>(); ds<span class="op">$</span>col &lt;-<span class="st"> &quot;gray&quot;</span>; ds<span class="op">$</span>srt &lt;-<span class="st"> </span><span class="dv">45</span>
visitor_flow &lt;-<span class="st"> </span>riverplot<span class="op">::</span><span class="kw">makeRiver</span>(
  experiment_nodes, experiment_edges,
  <span class="dt">node_xpos =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">5</span>),
  <span class="dt">node_styles =</span> <span class="kw">list</span>(
    <span class="st">&quot;Wikipedia visitors on Desktop&quot;</span> =<span class="st"> </span><span class="kw">list</span>(<span class="dt">col =</span> <span class="st">&quot;orange&quot;</span>),
    <span class="st">&quot;Polish (2.06%)&quot;</span> =<span class="st"> </span><span class="kw">list</span>(<span class="dt">col =</span> <span class="st">&quot;orange&quot;</span>),
    <span class="st">&quot;Catalan (0.23%)&quot;</span> =<span class="st"> </span><span class="kw">list</span>(<span class="dt">col =</span> <span class="st">&quot;orange&quot;</span>),
    <span class="st">&quot;Persian (0.61%)&quot;</span> =<span class="st"> </span><span class="kw">list</span>(<span class="dt">col =</span> <span class="st">&quot;orange&quot;</span>),
    <span class="st">&quot;Italian (2.85%)&quot;</span> =<span class="st"> </span><span class="kw">list</span>(<span class="dt">col =</span> <span class="st">&quot;orange&quot;</span>),
    <span class="st">&quot;Eligible for test&quot;</span> =<span class="st"> </span><span class="kw">list</span>(<span class="dt">col =</span> <span class="st">&quot;orange&quot;</span>),
    <span class="st">&quot;50% enrolled into A/B Test&quot;</span> =<span class="st"> </span><span class="kw">list</span>(<span class="dt">col =</span> <span class="st">&quot;orange&quot;</span>),
    <span class="st">&quot;1/3 assigned to Control&quot;</span> =<span class="st"> </span><span class="kw">list</span>(<span class="dt">col =</span> RColorBrewer<span class="op">::</span><span class="kw">brewer.pal</span>(<span class="dv">3</span>, <span class="st">&quot;Set1&quot;</span>)[<span class="dv">1</span>]),
    <span class="st">&quot;1/3 assigned to Test (Random)&quot;</span> =<span class="st"> </span><span class="kw">list</span>(<span class="dt">col =</span> RColorBrewer<span class="op">::</span><span class="kw">brewer.pal</span>(<span class="dv">3</span>, <span class="st">&quot;Set1&quot;</span>)[<span class="dv">2</span>]),
    <span class="st">&quot;1/3 assigned to Test (Recall)&quot;</span> =<span class="st"> </span><span class="kw">list</span>(<span class="dt">col =</span> RColorBrewer<span class="op">::</span><span class="kw">brewer.pal</span>(<span class="dv">3</span>, <span class="st">&quot;Set1&quot;</span>)[<span class="dv">3</span>])
  )
)
x &lt;-<span class="st"> </span><span class="kw">plot</span>(visitor_flow, <span class="dt">node_margin =</span> <span class="fl">1.5</span>, <span class="dt">default_style =</span> ds, <span class="dt">fix.pdf =</span> <span class="ot">TRUE</span>)</code></pre></div>
<div class="figure">
<img src="index_files/figure-html/user_flow-1.png" alt="Figure 2: Flow of Wikipedia visitors into the A/B test." />
<p class="caption"><strong>Figure 2</strong>: Flow of Wikipedia visitors into the A/B test.</p>
</div>
<p>We would like to note that our event logging does not support cross-wiki tracking, so after the user leaves the search results page, we cannot learn if they have performed subsequent searches, how and how long the user engaged with the visited result’s page.</p>
<p>See Phabricator ticket <a href="https://phabricator.wikimedia.org/T149806">T149806</a> and Gerrit changes <a href="https://gerrit.wikimedia.org/r/#/c/334314/">334314</a>, <a href="https://gerrit.wikimedia.org/r/#/c/313318/">313318</a>, <a href="https://gerrit.wikimedia.org/r/#/c/332991/">332991</a>, <a href="https://gerrit.wikimedia.org/r/#/c/334685/">334685</a>, and <a href="https://gerrit.wikimedia.org/r/#/c/336896/">336896</a> for full details of the implementation on both back-end and front-end.</p>
</div>
<div id="analysis" class="section level2">
<h2>Analysis</h2>
<p>We employed the <em>binom</em> <span class="citation">[<a href="#ref-R-binom">2</a>]</span> and internally-developed <em>BCDA</em> <span class="citation">[<a href="#ref-R-BCDA">3</a>]</span> packages for Bayesian statistical analysis and confidence intervals in Figures 12, 13, 14, and 15.</p>
</div>
</div>
<div id="results" class="section level1">
<h1>Results</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">load</span>(<span class="kw">path</span>(<span class="st">&quot;data/T156300.RData&quot;</span>)) <span class="co"># loads &#39;searches&#39; and &#39;indices&#39;</span></code></pre></div>
<p>After the test has concluded on 22 February 2017, we processed the collected data and filtered out duplicated events, extraneous search engine result pages (SERPs), and kept only the searches for which we had both event logging (EL) data and logs of searches (Cirrus requests). This left us with 6620 search sessions (see Table 1) with the full breakdown by wiki and group. Table 2 breaks down the counts of clicks on same-wiki results (e.g. a Catalan Wikipedia visitor clicking on a Catalan Wikipedia article) and clicks on sister-projects results (e.g. an Italian Wikipedia visitor clicking on an Italian Wikinews article).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">session_counts &lt;-<span class="st"> </span>searches <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(<span class="dt">Wiki =</span> wiki, group) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">sessions =</span> <span class="kw">length</span>(<span class="kw">unique</span>(session_id))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">xtabs</span>(sessions <span class="op">~</span><span class="st"> </span>Wiki <span class="op">+</span><span class="st"> </span>group, <span class="dt">data =</span> .) <span class="op">%&gt;%</span>
<span class="st">  </span>addmargins</code></pre></div>
<?xml version="1.0" encoding="UTF-8"?>
<table class="table table-striped table-hover" style="margin-left: auto; margin-right: auto;">
<caption>
<strong>Table 1</strong>: Number of search sessions used for analysis by wiki and group. Each search session may have several individual searches.
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
Control
</th>
<th style="text-align:right;">
Test (Random)
</th>
<th style="text-align:right;">
Test (Recall)
</th>
<th style="text-align:right;">
All 3 groups
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Catalan Wikipedia
</td>
<td style="text-align:right;">
460
</td>
<td style="text-align:right;">
413
</td>
<td style="text-align:right;">
414
</td>
<td style="text-align:right;">
1287
</td>
</tr>
<tr>
<td style="text-align:left;">
Italian Wikipedia
</td>
<td style="text-align:right;">
664
</td>
<td style="text-align:right;">
664
</td>
<td style="text-align:right;">
710
</td>
<td style="text-align:right;">
2038
</td>
</tr>
<tr>
<td style="text-align:left;">
Persian Wikipedia
</td>
<td style="text-align:right;">
664
</td>
<td style="text-align:right;">
631
</td>
<td style="text-align:right;">
658
</td>
<td style="text-align:right;">
1953
</td>
</tr>
<tr>
<td style="text-align:left;">
Polish Wikipedia
</td>
<td style="text-align:right;">
454
</td>
<td style="text-align:right;">
456
</td>
<td style="text-align:right;">
432
</td>
<td style="text-align:right;">
1342
</td>
</tr>
<tr>
<td style="text-align:left;">
All 4 wikis
</td>
<td style="text-align:right;">
2242
</td>
<td style="text-align:right;">
2164
</td>
<td style="text-align:right;">
2214
</td>
<td style="text-align:right;">
6620
</td>
</tr>
</tbody>
</table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">click_counts &lt;-<span class="st"> </span>searches <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">keep_where</span>(event <span class="op">!=</span><span class="st"> &quot;SERP&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(<span class="dt">Group =</span> group, event) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">count</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">xtabs</span>(n <span class="op">~</span><span class="st"> </span>Group <span class="op">+</span><span class="st"> </span>event, <span class="dt">data =</span> .) <span class="op">%&gt;%</span>
<span class="st">  </span>addmargins</code></pre></div>
<?xml version="1.0" encoding="UTF-8"?>
<table class="table table-striped table-hover" style="margin-left: auto; margin-right: auto;">
<caption>
<strong>Table 2</strong>: Number of click events by group.
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
Same-wiki clicks
</th>
<th style="text-align:right;">
Sister-project clicks
</th>
<th style="text-align:right;">
Overall clicks
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Control
</td>
<td style="text-align:right;">
1321
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1321
</td>
</tr>
<tr>
<td style="text-align:left;">
Test (Random)
</td>
<td style="text-align:right;">
1260
</td>
<td style="text-align:right;">
38
</td>
<td style="text-align:right;">
1298
</td>
</tr>
<tr>
<td style="text-align:left;">
Test (Recall)
</td>
<td style="text-align:right;">
1274
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
1316
</td>
</tr>
<tr>
<td style="text-align:left;">
All 3 groups
</td>
<td style="text-align:right;">
3855
</td>
<td style="text-align:right;">
80
</td>
<td style="text-align:right;">
3935
</td>
</tr>
</tbody>
</table>
<p>In Table 5, we observed the following three interactions:</p>
<ul>
<li><p>User <strong>A</strong> was a Persian Wikipedia visitor who got enrolled into the test and received their cross-wiki results ordered according to recall. The Wikiquote box was displayed first (below the Multimedia box). The user clicked on the specific result, then clicked to see more results from Wikiquote.</p></li>
<li><p>User <strong>B</strong> was an Italian Wikipedia visitor who got enrolled into the test and received their cross-wiki results ordered according to recall. This user had a similar interaction, although Wikisource was the first box displayed (below the Multimedia box), and the switch to viewing more results (after the initial probe into the specific result) was quicker.</p></li>
<li><p>User <strong>C</strong> was an Italian Wikipedia visitor who got enrolled into the test and received their cross-wiki results randomly ordered. The Wikiquote box was randomly displayed first (below the Multimedia box) and the user clicked to see more results. Perhaps unsatisfied with Wiktionary’s search results, the user clicked Back, but Wikisource was displayed first (below the Multimedia box) on this second load of the original search results.</p></li>
</ul>
<?xml version="1.0" encoding="UTF-8"?>
<table class="table table-striped table-hover" style="margin-left: auto; margin-right: auto;">
<caption>
<strong>Table 3</strong>: A sample of some visitors’ interaction with the cross-wiki search results after they were enrolled into the test groups.
</caption>
<thead>
<tr>
<th style="text-align:left;">
User
</th>
<th style="text-align:left;">
Wikipedia
</th>
<th style="text-align:left;">
Group
</th>
<th style="text-align:left;">
Timestamp
</th>
<th style="text-align:left;">
Click
</th>
<th style="text-align:left;">
Position
</th>
<th style="text-align:left;">
Sister Project
</th>
<th style="text-align:left;">
Destination
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
A
</td>
<td style="text-align:left;">
Persian
</td>
<td style="text-align:left;">
Recall
</td>
<td style="text-align:left;">
2017-02-15 18:16:20
</td>
<td style="text-align:left;">
1st
</td>
<td style="text-align:left;">
2nd
</td>
<td style="text-align:left;">
Wikiquote
</td>
<td style="text-align:left;">
Article
</td>
</tr>
<tr>
<td style="text-align:left;">
A
</td>
<td style="text-align:left;">
Persian
</td>
<td style="text-align:left;">
Recall
</td>
<td style="text-align:left;">
2017-02-15 18:17:03
</td>
<td style="text-align:left;">
2nd
</td>
<td style="text-align:left;">
2nd
</td>
<td style="text-align:left;">
Wikiquote
</td>
<td style="text-align:left;">
More Results
</td>
</tr>
<tr>
<td style="text-align:left;">
B
</td>
<td style="text-align:left;">
Italian
</td>
<td style="text-align:left;">
Recall
</td>
<td style="text-align:left;">
2017-02-17 09:04:18
</td>
<td style="text-align:left;">
1st
</td>
<td style="text-align:left;">
2nd
</td>
<td style="text-align:left;">
Wikisource
</td>
<td style="text-align:left;">
Article
</td>
</tr>
<tr>
<td style="text-align:left;">
B
</td>
<td style="text-align:left;">
Italian
</td>
<td style="text-align:left;">
Recall
</td>
<td style="text-align:left;">
2017-02-17 09:04:32
</td>
<td style="text-align:left;">
2nd
</td>
<td style="text-align:left;">
2nd
</td>
<td style="text-align:left;">
Wikisource
</td>
<td style="text-align:left;">
More Results
</td>
</tr>
<tr>
<td style="text-align:left;">
C
</td>
<td style="text-align:left;">
Italian
</td>
<td style="text-align:left;">
Random
</td>
<td style="text-align:left;">
2017-02-19 17:43:38
</td>
<td style="text-align:left;">
1st
</td>
<td style="text-align:left;">
2nd
</td>
<td style="text-align:left;">
Wikiquote
</td>
<td style="text-align:left;">
More Results
</td>
</tr>
<tr>
<td style="text-align:left;">
C
</td>
<td style="text-align:left;">
Italian
</td>
<td style="text-align:left;">
Random
</td>
<td style="text-align:left;">
2017-02-19 17:45:50
</td>
<td style="text-align:left;">
2nd
</td>
<td style="text-align:left;">
2nd
</td>
<td style="text-align:left;">
Wikisource
</td>
<td style="text-align:left;">
More Results
</td>
</tr>
</tbody>
</table>
<div id="zero-results-rate-zrr" class="section level2">
<h2>Zero Results Rate (ZRR)</h2>
<p>The zero results rate (ZRR) – proportion of searches yielding zero results – is one of Discovery’s Search Team’s key performance indicators (KPIs), and we are always interested in lowering that number (but not at the expense of results’ relevance). While we were primarily interested in searchers’ engagement with the search result for this test, we included this section as a consistency check – that the zero results rate is lower when a cross-wiki search is performed (see Figure 12).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">zrr &lt;-<span class="st"> </span>searches <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(wiki, group, serp_id) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(
    <span class="dt">same =</span> <span class="kw">any</span>(<span class="st">`</span><span class="dt">cirrus log: some same-wiki results</span><span class="st">`</span>),
    <span class="dt">sister =</span> <span class="kw">any</span>(<span class="st">`</span><span class="dt">cirrus log: some sister-wiki results</span><span class="st">`</span>),
    <span class="dt">either =</span> same <span class="op">||</span><span class="st"> </span>sister
  ) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(
    <span class="dt">total_searches =</span> <span class="kw">n</span>(),
    <span class="st">`</span><span class="dt">ZRR when counting just same-wiki results</span><span class="st">`</span> =<span class="st"> </span><span class="kw">sum</span>(<span class="op">!</span>same),
    <span class="st">`</span><span class="dt">ZRR when including sister-wiki results</span><span class="st">`</span> =<span class="st"> </span><span class="kw">sum</span>(<span class="op">!</span>either)
  ) <span class="op">%&gt;%</span>
<span class="st">  </span>ungroup <span class="op">%&gt;%</span>
<span class="st">  </span>tidyr<span class="op">::</span><span class="kw">gather</span>(results, zr_searches, <span class="op">-</span><span class="kw">c</span>(wiki, group, total_searches)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(wiki, group, results) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">do</span>(binom<span class="op">::</span><span class="kw">binom.bayes</span>(.<span class="op">$</span>zr_searches, .<span class="op">$</span>total_searches, <span class="dt">conf.level =</span> <span class="fl">0.95</span>))</code></pre></div>
<div class="figure">
<img src="index_files/figure-html/zrr_plot-1.png" alt="Figure 3: Proportion of searches yielding zero results broken up by group, wiki, and type of results (same-wiki only vs. including cross-wiki results)." />
<p class="caption"><strong>Figure 3</strong>: Proportion of searches yielding zero results broken up by group, wiki, and type of results (same-wiki only vs. including cross-wiki results).</p>
</div>
<div class="figure">
<img src="index_files/figure-html/zrr_lang_plot-1.png" alt="Figure 4: The proportion of searches that yielded zero results was the lowest for Wikipedia and Wikisource, with the other projects having very high zero result rates." />
<p class="caption"><strong>Figure 4</strong>: The proportion of searches that yielded zero results was the lowest for Wikipedia and Wikisource, with the other projects having very high zero result rates.</p>
</div>
<p>In Figure 4, we broke the ZRR from Figure 3 down by language and project and included a reference marker for each project’s overall ZRR (aggregated across all the languages the project is available in). Almost all of the projects are available (at the time of the test and at the time of writing this report) in Catalan, Italian, Persian, and Polish.</p>
<p>Namely, the overall ZRR of projects like Wikinews and Wiktionary (both exist in Catalan, Italian, Persian, and Polish) appears to be much lower than the ZRR observed in this test.</p>
<p>In fact, the ZRR in these four languages is much higher than the overall ZRR for every project. We suspect this is responsible for the low sister-project click counts seen in Table 2.</p>
</div>
<div id="engagement" class="section level2">
<h2>Engagement</h2>
<p>We used the clickthrough rate as an indicator of users’ engagement with search results and as a measure of the results’ relevance. That is, if we present users with more relevant results (such as those from Wikipedia’s sister projects), then we expect the clickthrough rate to be higher in the two test groups compared to that of controls. Figure 5 shows that various search activity measures did not vary too much from one group to another.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">counts &lt;-<span class="st"> </span>searches <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(wiki, group, session_id) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">searches =</span> <span class="kw">length</span>(<span class="kw">unique</span>(serp_id)),
            <span class="dt">SERPs =</span> <span class="kw">sum</span>(event <span class="op">==</span><span class="st"> &quot;SERP&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="st">`</span><span class="dt">total sessions</span><span class="st">`</span> =<span class="st"> </span><span class="kw">n</span>(),
            <span class="st">`</span><span class="dt">total searches</span><span class="st">`</span> =<span class="st"> </span><span class="kw">sum</span>(searches),
            <span class="st">`</span><span class="dt">average searches</span><span class="ch">\n</span><span class="dt">per user</span><span class="st">`</span> =<span class="st"> </span><span class="kw">mean</span>(searches),
            <span class="st">`</span><span class="dt">total SERPs</span><span class="ch">\n</span><span class="dt">seen by users</span><span class="st">`</span> =<span class="st"> </span><span class="kw">sum</span>(SERPs),
            <span class="st">`</span><span class="dt">average SERPs</span><span class="ch">\n</span><span class="dt">seen per user</span><span class="st">`</span> =<span class="st"> </span><span class="kw">mean</span>(SERPs)) <span class="op">%&gt;%</span>
<span class="st">  </span>ungroup <span class="op">%&gt;%</span>
<span class="st">  </span>tidyr<span class="op">::</span><span class="kw">gather</span>(metric, value, <span class="op">-</span><span class="kw">c</span>(wiki, group))</code></pre></div>
<div class="figure">
<img src="index_files/figure-html/counts_plot-1.png" alt="Figure 5: Average number of searches, average number of search engine result pages (SERPs), total searches, total SERPs, and total sessions by group and wiki. The groups did not appear to behave too differently. For example, the three groups had very similar average searches per user." />
<p class="caption"><strong>Figure 5</strong>: Average number of searches, average number of search engine result pages (SERPs), total searches, total SERPs, and total sessions by group and wiki. The groups did not appear to behave too differently. For example, the three groups had very similar average searches per user.</p>
</div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">searches_H1 &lt;-<span class="st"> </span>searches <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(serp_id) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">keep_where</span>(
    (group <span class="op">==</span><span class="st"> &quot;Control&quot;</span> <span class="op">&amp;</span><span class="st"> `</span><span class="dt">cirrus log: some same-wiki results</span><span class="st">`</span>) <span class="op">|</span>
<span class="st">      </span>(group <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Test (Recall)&quot;</span>, <span class="st">&quot;Test (Random)&quot;</span>) <span class="op">&amp;</span><span class="st"> `</span><span class="dt">cirrus log: some sister-wiki results</span><span class="st">`</span>)
  ) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(serp_id) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">right_join</span>(searches, <span class="dt">by =</span> <span class="st">&quot;serp_id&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(wiki, group, serp_id) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">clickthrough =</span> <span class="kw">any</span>(event <span class="op">!=</span><span class="st"> &quot;SERP&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">searches =</span> <span class="kw">n</span>(), <span class="dt">clickthroughs =</span> <span class="kw">sum</span>(clickthrough)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(wiki, group) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">do</span>(binom<span class="op">::</span><span class="kw">binom.bayes</span>(.<span class="op">$</span>clickthroughs, .<span class="op">$</span>searches, <span class="dt">conf.level =</span> <span class="fl">0.95</span>))</code></pre></div>
<div class="figure">
<img src="index_files/figure-html/hypothesis_1_plot-1.png" alt="Figure 6: Clickthrough rates of experimental groups, split by wiki. In the Control group, only searches that yielded some same-wiki results were considered. In the two test groups, only searches that yielded some sister-wiki results were considered." />
<p class="caption"><strong>Figure 6</strong>: Clickthrough rates of experimental groups, split by wiki. In the <span class="test-group-1">Control</span> group, only searches that yielded some same-wiki results were considered. In the two test groups, only searches that yielded some sister-wiki results were considered.</p>
</div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">bcda_H1a &lt;-<span class="st"> </span>searches_H1 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">keep_where</span>(group <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Control&quot;</span>, <span class="st">&quot;Test (Random)&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(wiki, <span class="kw">desc</span>(group)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(wiki) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">do</span>(BCDA<span class="op">::</span><span class="kw">tidy</span>(BCDA<span class="op">::</span><span class="kw">beta_binom</span>(.<span class="op">$</span>x, .<span class="op">$</span>n), <span class="dt">interval_type =</span> <span class="st">&quot;HPD&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span>ungroup
bcda_H1b &lt;-<span class="st"> </span>searches_H1 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">keep_where</span>(group <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Control&quot;</span>, <span class="st">&quot;Test (Recall)&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(wiki, <span class="kw">desc</span>(group)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(wiki) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">do</span>(BCDA<span class="op">::</span><span class="kw">tidy</span>(BCDA<span class="op">::</span><span class="kw">beta_binom</span>(.<span class="op">$</span>x, .<span class="op">$</span>n), <span class="dt">interval_type =</span> <span class="st">&quot;HPD&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span>ungroup</code></pre></div>
<div class="figure">
<img src="index_files/figure-html/bcda_H1a_plot-1.png" alt="Figure 7: Comparison of the Control group with the Test (Random) group." />
<p class="caption"><strong>Figure 7</strong>: Comparison of the <span class="test-group-1">Control</span> group with the <span class="test-group-2">Test (Random)</span> group.</p>
</div>
<div class="figure">
<img src="index_files/figure-html/bcda_H1b_plot-1.png" alt="Figure 8: Comparison of the Control group with the Test (Recall) group." />
<p class="caption"><strong>Figure 8</strong>: Comparison of the <span class="test-group-1">Control</span> group with the <span class="test-group-2">Test (Recall)</span> group.</p>
</div>
<?xml version="1.0" encoding="UTF-8"?>
<table class="table table-striped table-hover" style="margin-left: auto; margin-right: auto;">
<caption>
<strong>Table 6</strong>:
</caption>
<thead>
<tr>
<th style="text-align:left;">
Wiki
</th>
<th style="text-align:left;">
Comparison
</th>
<th style="text-align:left;">
Relative Risk
</th>
<th style="text-align:left;">
95% CI
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Catalan Wikipedia
</td>
<td style="text-align:left;">
Test (Random) vs Control
</td>
<td style="text-align:left;">
1.103
</td>
<td style="text-align:left;">
(0.920, 1.302)
</td>
</tr>
<tr>
<td style="text-align:left;">
Catalan Wikipedia
</td>
<td style="text-align:left;">
Test (Recall) vs Control
</td>
<td style="text-align:left;">
1.096
</td>
<td style="text-align:left;">
(0.903, 1.289)
</td>
</tr>
<tr>
<td style="text-align:left;">
Italian Wikipedia
</td>
<td style="text-align:left;">
Test (Random) vs Control
</td>
<td style="text-align:left;">
1.047
</td>
<td style="text-align:left;">
(0.941, 1.160)
</td>
</tr>
<tr>
<td style="text-align:left;">
Italian Wikipedia
</td>
<td style="text-align:left;">
Test (Recall) vs Control
</td>
<td style="text-align:left;">
0.976
</td>
<td style="text-align:left;">
(0.881, 1.085)
</td>
</tr>
<tr>
<td style="text-align:left;">
Persian Wikipedia
</td>
<td style="text-align:left;">
Test (Random) vs Control
</td>
<td style="text-align:left;">
1.055
</td>
<td style="text-align:left;">
(0.904, 1.199)
</td>
</tr>
<tr>
<td style="text-align:left;">
Persian Wikipedia
</td>
<td style="text-align:left;">
Test (Recall) vs Control
</td>
<td style="text-align:left;">
1.131
</td>
<td style="text-align:left;">
(0.977, 1.283)
</td>
</tr>
<tr>
<td style="text-align:left;">
Polish Wikipedia
</td>
<td style="text-align:left;">
Test (Random) vs Control
</td>
<td style="text-align:left;">
0.999
</td>
<td style="text-align:left;">
(0.850, 1.161)
</td>
</tr>
<tr>
<td style="text-align:left;">
Polish Wikipedia
</td>
<td style="text-align:left;">
Test (Recall) vs Control
</td>
<td style="text-align:left;">
1.122
</td>
<td style="text-align:left;">
(0.955, 1.304)
</td>
</tr>
</tbody>
</table>
<p>In Figures 6, 7, and 8, we saw that the clickthrough rate was higher in <span class="test-group-2">Test (Random)</span> and <span class="test-group-3">Test (Recall)</span> than in <span class="test-group-1">Control</span> on almost all of the four wikis. The only exception being the clickthrough rate of users in the <span class="test-group-2">Test (Random)</span> and <span class="test-group-3">Test (Recall)</span> group on the Italian and Polish Wikipedias, respectively.</p>
<p>Table 6 shows the <a href="https://en.wikipedia.org/wiki/Relative_risk">relative risk</a> – how more likely each respective test group is to engage with the search results (same-wiki or cross-wiki) than the <span class="test-group-1">Control</span> group. For example, on Catalan Wikipedia, users in the <span class="test-group-2">Test (Random)</span> are 1.103 times more likely to click on a result than users in the <span class="test-group-1">Control</span> group. While most of the estimates are greater than 1 (suggesting more relevant results), the 95% <a href="https://en.wikipedia.org/wiki/Credible_interval">credible intervals</a> contain 1, meaning we do not have sufficient evidence to draw definitive conclusions.</p>
</div>
</div>
<div id="discussion" class="section level1">
<h1>Discussion</h1>
<p>As can be seen in Figure 1, the cross-wiki results were displayed in black rather than the standard blue. This issue is tracked in <a href="https://phabricator.wikimedia.org/T158935">T158935</a>. We cannot estimate the effect this may have had on the results of the test, but we suspect this may have had a considerable negative effect because the results did not look like click-able links.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">indices_subset &lt;-<span class="st"> </span>indices <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">keep_where</span>(<span class="op">!</span>(project <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;commons&quot;</span>, <span class="st">&quot;wikipedia&quot;</span>))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(cirrus_id) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">sisters =</span> <span class="kw">length</span>(<span class="kw">unique</span>(project[n_results <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>])))
searches_subset &lt;-<span class="st"> </span>searches <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">keep_where</span>(group <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Test (Recall)&quot;</span>, <span class="st">&quot;Test (Random)&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">keep_where</span>(event <span class="op">==</span><span class="st"> &quot;SERP&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">distinct</span>(cirrus_id)
crosswiki_results &lt;-<span class="st"> </span>searches_subset <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">inner_join</span>(indices_subset, <span class="dt">by =</span> <span class="st">&quot;cirrus_id&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(sisters) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">count</span>()</code></pre></div>
<div class="figure">
<img src="index_files/figure-html/crosswiki_results_plot-1.png" alt="Figure 9: How many of the two test groups’ searches returned cross-wiki results from 0 (none) - 7 (all) sister projects." />
<p class="caption"><strong>Figure 9</strong>: How many of the two test groups’ searches returned cross-wiki results from 0 (none) - 7 (all) sister projects.</p>
</div>
<p>We also suspect that the high zero results rate for each of the sister projects for these four languages may have been responsible for the few sister-project clicks. In Figure 9, relatively few searches had more than 3 cross-wiki search results.</p>
<p>Furthermore, since the users did not see more than the top result from each sister project, it is possible they did not event want to bother with viewing more results since the one they were shown was not relevant. Ideally, the first result would always be the most relevant one, but that is not the case, and sometimes results further down the list are more relevant to the user’s actual task.</p>
<p>Additionally, Multimedia results were shown in a reverse order (see <a href="https://phabricator.wikimedia.org/T158937">T158937</a>), but we suspect this is a minor bug that did not have an effect on the test.</p>
</div>
<div id="references" class="section level1 unnumbered">
<h1>References</h1>
<div id="refs" class="references">
<div id="ref-R-base">
<p>[1] R Core Team. R: A language and environment for statistical computing [Internet]. Vienna, Austria: R Foundation for Statistical Computing; 2016. Available from: <a href="https://www.R-project.org/" class="uri">https://www.R-project.org/</a>.</p>
</div>
<div id="ref-R-binom">
<p>[2] Dorai-Raj S. Binom: Binomial confidence intervals for several parameterizations [Internet]. 2014. Available from: <a href="https://CRAN.R-project.org/package=binom" class="uri">https://CRAN.R-project.org/package=binom</a>.</p>
</div>
<div id="ref-R-BCDA">
<p>[3] Popov M. BCDA: Tools for bayesian categorical data analysis [Internet]. Available from: <a href="https://github.com/bearloga/BCDA" class="uri">https://github.com/bearloga/BCDA</a>.</p>
</div>
<div id="ref-R-rmarkdown">
<p>[4] Allaire J, Cheng J, Xie Y, et al. Rmarkdown: Dynamic documents for r [Internet]. 2016. Available from: <a href="http://rmarkdown.rstudio.com" class="uri">http://rmarkdown.rstudio.com</a>.</p>
</div>
<div id="ref-R-magrittr">
<p>[5] Bache SM, Wickham H. Magrittr: A forward-pipe operator for r [Internet]. 2014. Available from: <a href="https://CRAN.R-project.org/package=magrittr" class="uri">https://CRAN.R-project.org/package=magrittr</a>.</p>
</div>
<div id="ref-R-tidyr">
<p>[6] Wickham H. Tidyr: Easily tidy data with ’spread()’ and ’gather()’ functions [Internet]. 2017. Available from: <a href="https://CRAN.R-project.org/package=tidyr" class="uri">https://CRAN.R-project.org/package=tidyr</a>.</p>
</div>
<div id="ref-R-dplyr">
<p>[7] Wickham H, Francois R. Dplyr: A grammar of data manipulation [Internet]. 2016. Available from: <a href="https://CRAN.R-project.org/package=dplyr" class="uri">https://CRAN.R-project.org/package=dplyr</a>.</p>
</div>
<div id="ref-R-ggplot2">
<p>[8] Wickham H. Ggplot2: Elegant graphics for data analysis [Internet]. Springer-Verlag New York; 2009. Available from: <a href="http://ggplot2.org" class="uri">http://ggplot2.org</a>.</p>
</div>
<div id="ref-R-wmf">
<p>[9] Keyes O, Popov M. Wmf: R code for wikimedia foundation internal usage [Internet]. 2017. Available from: <a href="https://phabricator.wikimedia.org/diffusion/1821/" class="uri">https://phabricator.wikimedia.org/diffusion/1821/</a>.</p>
</div>
</div>
</div>

<div id="wmf" title="By Wikimedia Foundation (Wikimedia Foundation) [CC BY-SA 3.0 (http://creativecommons.org/licenses/by-sa/3.0)], via Wikimedia Commons"></div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://tools-static.wmflabs.org/cdnjs/ajax/libs/mathjax/2.6.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
